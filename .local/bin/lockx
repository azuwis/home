#!/bin/bash
# Kanged from https://github.com/cyphar/dotfiles/blob/master/.local/bin/lockmyi3
# More at https://www.reddit.com/r/unixporn/comments/3358vu/i3lock_unixpornworthy_lock_screen/

lock_image=$(dirname "$0")/lock.png

revert() {
    xset dpms 600 600 600
}
trap revert SIGHUP SIGINT SIGTERM
xset +dpms dpms 5 5 5
i3lock --nofork --no-unlock-indicator --image=<(convert x:root -scale 10% -scale 1000% "$lock_image" -gravity center -composite -matte png:-)
revert
