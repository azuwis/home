# Help function
run() {
    cmd=$1
    test -x "/usr/bin/${cmd}" && "$@" &
}

# Ensure .Xresources is loaded
run xrdb .Xresources

# Wallpaper
test -r wallpapers/current && run xsetbg wallpapers/current

# Auto start
run devmon
run parcellite
run xautolock -time 30 -locker 'i3lock --color=000000'

# Apply color profile
if [ -x /usr/bin/xcalib ]; then
    # XXX EDID is a much better way
    read product < /sys/class/dmi/id/product_name
    icc=".color/icc/${product}.icc"
    test -r "$icc" && xcalib "$icc"
fi

# NUC only settings
if [ x"$(hostname)" = x"nuc" ]; then
    # No blank screen for NUC
    xset -dpms s noblank s off
    # Map search key to win key
    xmodmap -e 'keysym XF86Search = Super_L'
fi
