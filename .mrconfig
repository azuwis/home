# -*- mode: conf -*-

[DEFAULT]
include = cat ~/.mrlib

lib = 
	GITHUB_USER="azuwis"

# common
[.]
checkout = git clone 'git://github.com/azuwis/home.git' '.'
fixups = 
	   git --version | grep -qF 'git version 2.' && git config --file=.gitconfig.local push.default simple
	   download https://github.com/mpv-player/mpv/raw/master/TOOLS/lua/autoload.lua .config/mpv/scripts/autoload.lua

[bin]
checkout = git clone 'git://github.com/azuwis/bin.git' 'bin'
fixups = 
	   download https://sevenever.googlecode.com/svn/trunk/misc/fetchsub.py fetchsub +x
	   download https://raw.githubusercontent.com/mpv-player/mpv/master/TOOLS/mpv_identify.sh mpv_identify.sh +x
	   download https://github.com/sivel/speedtest-cli/raw/master/speedtest_cli.py speedtest +x
	   download https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein lein +x

# firefox
[.pentadactyl]
checkout = git clone 'git://github.com/azuwis/.pentadactyl.git' '.pentadactyl'
chain = true
skip = no_cmd firefox

# spacemacs
[.emacs.d]
checkout = git clone --branch develop --recursive https://github.com/syl20bnr/spacemacs .emacs.d
post_update = 
	   git submodule init
	   git submodule sync
	   git submodule update
skip = no_cmd emacs

# misc
[org]
checkout = git clone 'git://github.com/azuwis/org.git' 'org'
pre_push = 
	   git commit -am 'Auto commit' || true
skip = ! workstation

# rime
[.config/fcitx/rime]
checkout = git clone 'git://github.com/azuwis/.config_fcitx_rime.git' 'rime'
fixups =
	   chmod 700 .
	   download https://github.com/rime-aca/dictionaries/raw/master/luna_pinyin.dict/luna_pinyin.extended.dict.yaml
	   sed -i '/^  - luna_pinyin\.cn_en$/d' luna_pinyin.extended.dict.yaml
	   download https://github.com/rime-aca/dictionaries/raw/master/luna_pinyin.dict/luna_pinyin.hanyu.dict.yaml
	   download https://github.com/rime-aca/dictionaries/raw/master/luna_pinyin.dict/luna_pinyin.poetry.dict.yaml
	   download https://github.com/rime-aca/dictionaries/raw/master/luna_pinyin.dict/luna_pinyin.cn_en.dict.yaml
skip = ! test -d /usr/share/doc/fcitx-rime

# include ~/.mrconfig.local
include = test -e ~/.mrconfig.local && cat ~/.mrconfig.local || true
